<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>X·∫øp C√¢u - Game C√¥ H√†</title>
  <style>
    body {
      margin: 0;
      font-family: 'Georgia', serif;
      background: linear-gradient(135deg, #f9e6ff, #e6f2ff);
      text-align: center;
      overflow-x: hidden;
    }
    header {
      padding: 20px;
    }
    header button {
      background: #a64ca6;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      font-size: 16px;
      cursor: pointer;
    }
    header button:hover {
      background: #cc66cc;
    }
    h1 {
      font-family: 'Brush Script MT', cursive;
      font-size: 42px;
      color: #663399;
      margin: 10px 0 20px 0;
    }
    .game-wrapper {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
    .game-container {
      position: relative;
      background: rgba(255, 255, 255, 0.9);
      padding: 30px;
      border-radius: 25px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      max-width: 650px;
      margin: 0 auto;
      border: 2px dashed #cc99ff;
    }
    .chibi {
      position: absolute;
      top: 40px;
      width: 150px;
    }
    .chibi.left {
      right: 100%;
      margin-right: -40px; /* ƒë∆∞a s√°t v√†o container */
    }
    .chibi.right {
      left: 100%;
      margin-left: -40px; /* ƒë∆∞a s√°t v√†o container */
    }
    .scrambled {
      margin: 20px 0;
      font-size: 22px;
      font-style: italic;
      color: #444;
      background: #faf0ff;
      padding: 15px;
      border-radius: 15px;
      border: 1px solid #e0c2ff;
    }
    input {
      padding: 12px;
      font-size: 18px;
      width: 80%;
      border: 1px solid #aaa;
      border-radius: 12px;
      outline: none;
    }
    input:focus {
      border-color: #a64ca6;
    }
    .buttons {
      margin-top: 20px;
    }
    .buttons button {
      margin: 8px;
      padding: 12px 24px;
      border: none;
      border-radius: 18px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .buttons button:nth-child(1) { background: #66bb6a; color: white; }
    .buttons button:nth-child(1):hover { background: #57a05a; }
    .buttons button:nth-child(2) { background: #ef5350; color: white; }
    .buttons button:nth-child(2):hover { background: #d94c48; }
    .buttons button:nth-child(3) { background: #42a5f5; color: white; }
    .buttons button:nth-child(3):hover { background: #368cd4; }
    .result {
      margin-top: 20px;
      font-size: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    <button onclick="window.location.href='https://homepage-gray-omega.vercel.app/'">üè† Trang ch·ªß</button>
  </header>

  <h1>X·∫øp C√¢u C√πng C√¥ H√†</h1>

  <div class="game-wrapper">
    <div class="game-container">
      <img src="coha-left.png" alt="C√¥ H√† Chibi Tr√°i" class="chibi left" />
      <div id="scrambled" class="scrambled"></div>
      <input type="text" id="answer" placeholder="H√£y nh·∫≠p l·∫°i c√¢u ƒë·∫ßy ƒë·ªß..." />
      <div class="buttons">
        <button onclick="checkAnswer()">X√°c nh·∫≠n</button>
        <button onclick="giveUp()">Ch·ªãu thua</button>
        <button onclick="nextSentence()">C√¢u ti·∫øp</button>
      </div>
      <div id="result" class="result"></div>
      <img src="coha-right.png" alt="C√¥ H√† Chibi Ph·∫£i" class="chibi right" />
    </div>
  </div>

  <script type="module">
    import sentences from './sentences.js';

    let currentSentence;

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function newSentence() {
      document.getElementById("result").innerText = "";
      document.getElementById("answer").value = "";

      currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
      let scrambledWords = shuffle(currentSentence.text.split(" "));
      document.getElementById("scrambled").innerText = scrambledWords.join(" / ");
    }

    window.checkAnswer = function() {
      const userAnswer = document.getElementById("answer").value.trim();
      if (userAnswer === currentSentence.text) {
        document.getElementById("result").innerText = "‚úÖ Ch√≠nh x√°c! " + currentSentence.explain;
        document.getElementById("result").style.color = "green";
      } else {
        document.getElementById("result").innerText = "‚ùå Sai r·ªìi, th·ª≠ l·∫°i!";
        document.getElementById("result").style.color = "red";
      }
    };

    window.giveUp = function() {
      document.getElementById("result").innerText = "üëâ ƒê√°p √°n: " + currentSentence.text + " (" + currentSentence.explain + ")";
      document.getElementById("result").style.color = "blue";
    };

    window.nextSentence = function() {
      newSentence();
    };

    // Load c√¢u ƒë·∫ßu ti√™n
    newSentence();

    // Enter ƒë·ªÉ x√°c nh·∫≠n ho·∫∑c qua c√¢u m·ªõi
    document.getElementById("answer").addEventListener("keydown", function(e) {
      if (e.key === "Enter") {
        if (document.getElementById("result").innerText.includes("‚úÖ") ||
            document.getElementById("result").innerText.includes("üëâ")) {
          nextSentence();
        } else {
          checkAnswer();
        }
      }
    });
  </script>
</body>
</html>
